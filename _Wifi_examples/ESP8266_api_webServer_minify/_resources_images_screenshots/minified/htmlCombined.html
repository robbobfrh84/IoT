<!DOCTYPE html>
<html lang='en'>
<title> serve_html_api_ada </title>
<link rel='icon' href='https://raw.githubusercontent.com/robbobfrh84/drive/master/images/SystemIcons-Images/code.png?token=ADYWSUWL4GA3YTJRHIZRTHK7RGREU'>
<head>
  <meta charset='UTF-8'><meta http-equiv='X-UA-Compatible' content='ie=edge'>
  <meta name='viewport' content='width=device-width, initial-scale=1.0'>
  
<style>body{text-align:center}</style></head>
<body>

  <h1> Serve Html & Api MKR1000 </h1>
  <input type='checkbox' id='led' onclick='ledToggle()'> LED state
  </br></br>

  API reference: <a id='apiLink' href='api'>/api</a>

  <span id='btn' style='padding: 5px;'></span>

  

<script>const j1="{TestString:'''bob'''}",j2='''{testString:"bob"}''',api=function(){console.log("get api"),fetch("http://192.168.1.126/api").then((t=>t.json())).then((t=>{console.log("data: ",t),apiLink.href=t.api}))},ledToggle=function(){console.log("post led state"),fetch("http://192.168.1.126/api/ledToggle",{method:"POST",body:'''{"led":'''+led.checked+"}"}).then((t=>t.json())).then((t=>console.log("data: ",t)))},checkBtnState=function(){console.log("get button state"),fetch("http://192.168.1.126/api/checkBtnState").then((t=>t.json())).then((t=>{console.log("data: ",t),1==t.pin12?btn.innerHTML="<br>Button<br>!PRESSED!":btn.innerHTML="<br>Button not pressed"}))};console.log("get api"),fetch("http://192.168.1.126/api").then((t=>t.json())).then((t=>{console.log("data: ",t),apiLink.href=t.api})),setInterval((function(){console.log("get button state"),fetch("http://192.168.1.126/api/checkBtnState").then((t=>t.json())).then((t=>{console.log("data: ",t),1==t.pin12?btn.innerHTML="<br>Button<br>!PRESSED!":btn.innerHTML="<br>Button not pressed"}))}),1e3);</script></body>
</html>
